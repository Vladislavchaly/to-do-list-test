class ApiService{constructor(e){this.baseUrl=e,this.token=localStorage.getItem("access_token")}request(e,t="GET",r=null){return new Promise((s,n)=>{$.ajax({url:this.baseUrl+e,type:t,dataType:"json",contentType:"application/json",headers:{Authorization:this.token,"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:r?JSON.stringify(r):null,success(e){s(e)},error:e=>{this.handleError(e),n(e)}})})}handleError(e){401===e.status?(alert("Session expired. Redirecting to login."),localStorage.removeItem("access_token"),window.location.href="/login"):403===e.status?alert("You do not have permission to perform this action."):500===e.status?alert("Server error. Please try again later."):alert("An error occurred: "+e.statusText)}get(e){return this.request(e,"GET")}delete(e){return this.request(e,"DELETE")}post(e,t){return this.request(e,"POST",t)}put(e,t){return this.request(e,"PUT",t)}patch(e,t){return this.request(e,"PATCH",t)}setToken(e){this.token=e,localStorage.setItem("access_token",e)}}